{% extends "base_site.html" %}

{% block title %}Drafts - View{% endblock %}

{% block extrahead %}{{ block.super }}
  <script type="text/javascript" src="/media/js/utils.js"></script>
{% endblock %}

{% block breadcrumbs %}{{ block.super }} 
  &raquo; <a href="../">Drafts</a>
  &raquo; {{ draft.id_document_tag }}
{% endblock %}

{% block content %}

{% comment %}{{ request.user }}{% endcomment %}

<div class="module draft-container">
  <div id="draft-view-col1">
    <h2>Draft - View</h2>
      <table >
        <tr><td>Document Name:</td><td>{{ draft.title }}</td></tr>
        <tr><td>Area:</td><td>{% if draft.get_area %}<a href="{% url sec.areas.views.view id=draft.get_area.area_acronym.acronym_id %}">{{ draft.get_area.area_acronym.name }}{% else %}{% endif %}</td></tr>
        <tr><td>Group:</td><td><a href="{% url sec.groups.views.view id=draft.group.acronym_id %}">{{ draft.group.ietfwg }}</td></tr>
        <tr><td>Document Status:</td><td>{{ draft.status }}</td></tr>
        <tr><td>ID Tracker State:</td><td>{{ id_tracker_state }}</td></tr>
        <tr><td>Under Review by RFC Editor:</td><td>{% if draft.review_by_rfc_editor %}YES{% else %}NO{% endif %}</td></tr>
        <tr><td>File Name:</td>
          <td>{% if draft.expired_tombstone %}
                {{ draft.filename }}
                <div class=alert>This is a last active version - the tombstone was expired.</div>
              {% else %}<a href="{% if is_development %}http://devr.amsl.com/ftp/{% else %}http://www.ietf.org/internet-drafts/{% endif %}{{ draft.filename }}-{{ draft.revision }}.txt">{{ draft.filename }}</a>
              {% endif %}
          </td></tr>
        <tr><td>Revision:</td><td>{{ draft.revision }}</td></tr>
        <tr><td>Revision Date:</td><td>{{ draft.revision_date }}</td></tr>
        <tr><td>Start Date:</td><td>{{ draft.start_date }}</td></tr>
        <tr><td>Number of Pages:</td><td>{{ draft.txt_page_count }}</td></tr>
        {% comment %}<tr><td>Local Path:</td><td>/ftp/internet-drafts/{{ draft.local_path|default_if_none:"" }}</td></tr>{% endcomment %}
        <tr><td>Abstract:</td><td><a href="{% url sec.drafts.views.abstract id=draft.id_document_tag %}">Click here to view the abstract</td></tr>
        <tr><td>Expiration Date:</td><td>{{ draft.expiration_date|default_if_none:"" }}</td></tr>
        <tr><td>Intended Status:</td><td>{{ draft.intended_status|default_if_none:"" }}</td></tr>
        <tr><td>RFC Number:</td><td>{{ draft.rfc_number|default_if_none:"" }}</td></tr>
        <tr><td>Dunn Sent Date:</td><td>{{ draft.dunn_sent_date|default_if_none:"" }}</td></tr>
        <tr><td>Extension Date:</td><td>{{ draft.extension_date|default_if_none:"" }}</td></tr>
        <tr><td>Changes Expected:</td><td>{{ draft.lc_changes|default_if_none:"NO" }}</td></tr>
        <tr><td>Comments:</td><td>{{ draft.comments|default_if_none:"" }}</td></tr>
        <tr><td>Last Modified Date:</td><td>{{ draft.last_modified_date }}</td></tr>
        <tr><td>Replaced by:</td><td>{% if draft.replaced_by %}<a href="{% url sec.drafts.views.view id=draft.replaced_by.id_document_tag %}">{% endif %}{{ draft.replaced_by.filename }}</td></tr>
      </table>

  </div> <!-- draft-view-col1 -->
  <div id="draft-view-col2">
      <div class="inline-related">
        <h2>Author(s)</h2>
        <table>
	{% for author in draft.authors.all %}
          <tr><td><a href="{% url sec.rolodex.views.view tag=author.person.person_or_org_tag %}">{{ author.person.first_name }} {{ author.person.last_name }}</a></td></tr>
        {% endfor %}
        </table>
      </div> <!-- inline-related -->
      <div class="inline-related action-group">
        <h2>Actions</h2>
          <ul>
            <li><button {% if is_active %}{% else %}disabled="disabled"{% endif %}onclick="window.location='revision/'">New Revision</button></li>
            <li><button {% if is_expired %}{% else %}disabled="disabled"{% endif %}onclick="window.location='update/'">Update Expired</button></li>
            <li><button {% if is_expired or is_withdrawn %}{% else %}disabled="disabled"{% endif %}onclick="window.location='resurrect/'">Resurrect</button></li>
            <li><button {% if is_active or is_expired %}{% else %}disabled="disabled"{% endif %}onclick="window.location='replace/'">Replace</button></li>
            <li><button {% if is_active %}{% else %}disabled="disabled"{% endif %}onclick="window.location='extend/'">Extend Expiry</button></li>
            <li><button {% if is_active %}{% else %}disabled="disabled"{% endif %}onclick="window.location='withdraw/'">Withdraw</button></li>
            <li><button {% if is_active %}{% else %}disabled="disabled"{% endif %}onclick="window.location='announce/'">Announcement</button></li>
            <li><button {% if is_active %}{% else %}disabled="disabled"{% endif %}onclick="window.location='makerfc/'">Make RFC</button></li>
          </ul>
      </div> <!-- inline-related -->
  </div> <!-- draft-view-col2 -->

      <div class="button-group">
	<ul>
          <li><button onclick="window.location='edit/'">Edit</button></li>
          <li><button onclick="window.location='authors/'">Authors</button></li>
          {% comment %}
          <li><button onclick="window.location='{% url sec.ids.views.search id=group.group_acronym.acronym_id %}'">Drafts</button></li>
          <li><button onclick="window.location='{% url sec.rfcs.views.search id=group.group_acronym.acronym_id %}'">RFCs</button></li>
          {% endcomment %}
	</ul>
      </div> <!-- button-group -->
</div> <!-- module -->

{% endblock %}
